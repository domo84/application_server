#!/usr/bin/env node

"use strict";

const fork = require("child_process").fork;

const Environment = require("../lib/environment");
const WebServer = require("../lib/web_server");
const Watcher = require("../lib/watcher");

const Babel = require("../tasks/babel");
const Sass = require("../tasks/sass");
const StaticFiles = require("../tasks/static_files");

start();

var workers = { 
	watcher: fork(__dirname + "/../workers/watcher", [], {}),
	web_server: fork(__dirname + "/../workers/web_server", [], {}),
	reload: fork(__dirname + "/../workers/reload", [], {})
};

function start()
{
	let env = new Environment();
	env.setup();

	let babel = new Babel(env);
	babel.run();

	let sass = new Sass(env);
	sass.run();

	let sf = new StaticFiles(env);
	sf.copy();
}
